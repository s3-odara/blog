<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>
 Vimの入力モードの切り替えでFcitx5をオン/オフする | s3-odaraのブログ
</title>
<meta name="description" content="vimでinsert modeの切り替えに応じて自動でfcitx 5のオンオフを切り替える" />
<meta name="viewport" content="initial-scale=1" />
<link rel="canonical" href="https://www.s3-odara.net/article/vim-insert-fcitx5.html" />
<link rel="stylesheet" type="text/css" href="../css/blog.css" />
<link rel="stylesheet" type="text/css" href="../css/prism.css" />
<script defer="defer" src="../js/tools.js"></script>
</head>

<body>

<header>
<nav class='blog'>
<a href="../index.html">Home</a>
<a rel="author" href="../about.html">About Me</a>
<a rel="alternate" href="https://blog.omae.dev/">Mirror</a>
</nav>
</header>

<main class='blog'>
<article>
<header>
<h1>
Vimの入力モードの切り替えでFcitx5をオン/オフする
</h1>
<time datetime="2026-02-07">
2026-02-07
</time>

<!--toc-->
</header>


<p>
.vimrcに以下を追記
</p>

<pre><code class='language-vim'>function! Osc52Copy()
  " 現在の無名レジスタの中身を退避
  let l:save_reg = @"
  normal! gvy
  let l:content = @"
  " レジスタを復元
  let @" = l:save_reg
  if len(l:content) == 0
    echo "Nothing to copy"
    return
  endif
  " Base64
  let l:b64 = system('base64 | tr -d "\n"', l:content)
  " 文字数制限
  if len(l:b64) &gt; 100000
    redraw
    echohl WarningMsg
    echo "Warning: Content too large for OSC 52 copy."
    echohl None
    return
  endif
  " シーケンスを作成
  "    \x1b]52;c;{base64}\x07
  let l:seq = "\x1b]52;c;" . l:b64 . "\x07"
  call writefile([l:seq], "/dev/tty", "b")
  redraw!
  echo "Copied to clipboard (OSC 52)"
endfunction</code></pre>

</article>
</main>

<footer>
<a href="../index.html">s3-odaraのサイト</a> by <a rel="author" href="../about.html">小原晴太</a> is Licensed under <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>
<nav><a href="../index.html">HOME</a></nav>
</footer>
</body>
</html>

